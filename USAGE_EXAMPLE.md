# Tali 使用示例

## 快速开始

### 1. 设置环境变量

```bash
export ALIBABA_CLOUD_ACCESS_KEY_ID="your-access-key-id"
export ALIBABA_CLOUD_ACCESS_KEY_SECRET="your-access-key-secret"
export ALIBABA_CLOUD_REGION_ID="cn-hangzhou"
export ALIBABA_CLOUD_OSS_ENDPOINT="oss-cn-hangzhou.aliyuncs.com"
```

### 2. 启动应用

```bash
./tali
```

## 界面导航

### 主菜单
- 使用数字键 `1-5` 选择不同的服务
- 使用 `Q` (大写) 退出应用程序
- 使用方向键或 `j/k` 导航

### 列表页面
- **ECS 实例列表**: 显示实例 ID、状态、可用区、CPU/RAM 配置、私有 IP、公网 IP、名称
- **DNS 域名列表**: 显示域名、记录数量、版本代码
- **SLB 实例列表**: 显示 SLB ID、名称、IP 地址、类型、状态
- **OSS 存储桶列表**: 显示存储桶名称、位置、创建日期、存储类型
- **RDS 实例列表**: 显示实例 ID、引擎、版本、实例类、状态、描述

### 详情页面
- 所有详情页面都以 **JSON 格式** 显示完整的资源信息
- 支持滚动查看完整的 JSON 数据
- 包含所有 API 返回的原始字段

### 快捷键

#### 全局快捷键
- `Q` (大写): 退出应用程序
- `Ctrl+C`: 强制退出应用程序
- `Esc` 或 `q` (小写): 返回上一级页面
- `O` (大写): 打开配置选择对话框

#### 配置管理
- 底部的 mode line 显示当前活动的配置名称
- 按 `O` 打开配置选择对话框
- 在配置对话框中：
  - 使用 `j/k` 上下导航
  - 按 `Enter` 选择配置
  - 按 `q` 或 `Esc` 取消
- 切换配置后：
  - 自动重新创建所有客户端连接
  - 清除所有缓存数据
  - 返回主菜单
  - 新的凭据立即生效

#### OSS 对象分页
- `[`: 上一页
- `]`: 下一页
- `0`: 回到第一页
- 页面信息显示在右下角 mode line 中

#### 列表导航
- `j`: 向下移动
- `k`: 向上移动
- `Enter`: 选择项目查看详情

#### 详情页面
- `Esc` 或 `q`: 返回列表页面
- `Q`: 退出应用程序
- 方向键: 滚动查看 JSON 内容

#### 数据复制和编辑
- `yy` (双击 y): 在表格中复制当前行的 JSON 数据到系统剪贴板
- `yy` (双击 y): 在详情页面复制完整 JSON 数据到系统剪贴板
- `e`: 在详情页面使用 nvim 打开 JSON 数据进行编辑
- 详情页面支持鼠标选中文字

#### 搜索功能
- `/`: 进入搜索模式（在屏幕底部显示搜索栏，类似 vim）
- `Enter`: 执行搜索并高亮匹配项
- `Escape`: 退出搜索模式
- `n`: 跳转到下一个搜索结果
- `p`: 跳转到上一个搜索结果
- 搜索默认不区分大小写
- 支持所有表格视图和 JSON 详情视图
- 搜索结果以黄色高亮显示
- 搜索界面模仿 vim 的行为，在屏幕底部显示搜索栏

## 功能特性

### 1. ECS 实例管理
- 查看所有 ECS 实例的基本信息
- 显示增强的列表信息：可用区、CPU/RAM 配置、IP 地址
- 点击实例查看完整的 JSON 配置

### 2. DNS 管理
- 浏览所有 AliDNS 域名
- 查看每个域名的 DNS 记录
- 支持查看记录类型、值、TTL 等详细信息

### 3. SLB 负载均衡
- 列出所有 SLB 实例
- 查看负载均衡器的详细配置
- JSON 格式显示完整的负载均衡器信息

### 4. OSS 对象存储
- 浏览所有 OSS 存储桶
- 查看存储桶中的对象列表
- 支持查看对象的详细元数据

### 5. RDS 数据库
- 列出所有 RDS 实例
- 查看数据库实例的详细配置
- 包含连接信息、网络配置等完整信息

#### RDS 数据库和账号管理
- 在 RDS 实例列表中，选中实例后：
  - 按 `D` (大写): 查看该实例的数据库列表
  - 按 `A` (大写): 查看该实例的账号列表
- 数据库表格显示：数据库名称、状态、字符集、绑定账号、备注说明
- 账号表格显示：账号名称、类型、状态、绑定数据库、描述
- 支持查看数据库和账号的详细 JSON 信息
- 支持复制和编辑功能

## 界面改进

### 表格宽度优化
- 所有列表表格现在使用 100% 宽度
- 自动调整列宽以适应内容
- 固定表头，便于浏览长列表

### 统一的 JSON 详情视图
- 所有资源的详情页面都使用统一的 JSON 格式
- 保留完整的 API 响应数据
- 支持滚动查看大型 JSON 对象

### 改进的快捷键设计
- `q` 和 `Esc` 都用于返回上一级
- 只有 `Q` (大写) 用于退出程序
- 减少误操作退出的可能性

## 故障排除

### 常见问题
1. **认证错误**: 检查环境变量是否正确设置
2. **网络连接**: 确保能够访问阿里云 API 端点
3. **权限问题**: 确认 Access Key 具有相应的服务权限
4. **OSS 端点**: 确保 OSS 端点与区域匹配

### 调试技巧
- 使用 JSON 详情视图查看完整的 API 响应
- 检查错误模态框中的详细错误信息
- 确认区域 ID 与资源所在区域一致 